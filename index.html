<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GitHub Repo Finder</title>
 <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>GitHub Repo Finder</h1>
  <form id="repoForm">
    <label>Language:</label>
    <input type="text" id="language" value="Python">

    <label>Minimum Stars:</label>
    <input type="number" id="stars" value="100">

    <label>Created After (YYYY-MM-DD):</label>
    <input type="text" id="created_after" value="2018-05-05">

    <label>Limit:</label>
    <input type="number" id="limit" value="5">

    <button type="submit">Search</button>
  </form>

  <div class="results" id="results"></div>

  <script>
    document.getElementById("repoForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      const language = document.getElementById("language").value;
      const stars = document.getElementById("stars").value;
      const created_after = document.getElementById("created_after").value;
      const limit = document.getElementById("limit").value;

      const url = `http://${your_backend_url_endpoint}}/repos?language=${encodeURIComponent(language)}&stars=${stars}&created_after=${created_after}&limit=${limit}`;

      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "<p>Loading...</p>";

      try {
        const response = await fetch(url);
        const data = await response.json();
        console.log(data);
        resultsDiv.innerHTML = "";

        if (data.repos && data.repos.length > 0) {
          data.repos.forEach(repo => {
            const div = document.createElement("div");
            div.className = "repo";
            div.innerHTML = `
              <h3><a href="${repo.url}" target="_blank">${repo.name}</a></h3>
              <p>${repo.description || "No description provided."}</p>
              <p class="meta">‚≠ê ${repo.stars} | Created At: ${repo.created_at}</p>
            `;
            resultsDiv.appendChild(div);
          });
        } else {
          resultsDiv.innerHTML = "<p>No repositories found.</p>";
        }
      } catch (error) {
        resultsDiv.innerHTML = `<p style="color:red;">Error fetching data: ${error}</p>`;
      }
    });
  </script>
</body>
</html>
